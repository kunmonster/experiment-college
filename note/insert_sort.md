
[TOC]

# 插入排序

## 简介

	插入排序是一种比较符合直观思维的排序方法,每次将一个待排序的记录按其关键字的大小插入到前面已经有序的序列中去,直到全部记录排序完成,主要有以下三种插入排序:直接插入排序,折半(二分)插入排序,希尔(shell)排序.

## 直接插入排序

### 1.原理:
1.	如果序列长度小于等于1,无需排序
2.	序列长度大于等于2,则从第2个元素开始:
	+ 当前元素大于或等于前一个元素,此元素无需插入到前面,索引指向后一个元素
	+ 当前元素小于前一个元素,此元素需要插入到前面的有序序列中,插入过程如下:
	> 1. 将需要插入的元素暂存
	> 2. 从前一个元素开始,比较是否大于需要插入的元素,是则将前一个元素向后移动一个位置,索引指向前一个元素的前一个元素,直到索引小于0或者索引指向的元素小于或者等于需要插入的元素(索引移动的同时需要移动元素)
	> 3. 插入元素到当前索引的下一个位置
	> 4. 外层索引向后移动

### 2. 代码:

```
void stright_insert_sort(Element<T> *arr, int len) {
  if (len <= 1) return;
  // store the insert_Needed element into guard
  Element<T> guard;
  int j = 0;
  for (int i = 1; i < len; ++i) {
    if (*(arr + i) < *(arr + i - 1)) {
      //当前元素小于前一个元素
      guard = *(arr + i);
      for (j = (i - 1); (j >= 0) && (guard < arr[j]); --j) arr[j + 1] = arr[j];
      arr[j + 1] = guard;
    }
  }
}
```

### 3.效率分析

#### 时间效率:

+ 最好情况 : 序列已经为关键字有序,此时时间主要消耗在比较大小上面,最好情况下只需要n次比较,时间复杂度为O(n)
+ 最坏情况 : 序列按关键字倒序排列,此时每个元素都需要往前插,此时时间主要花在移动元素上面,因为要把第i个元素插到前面有序序列去,倒序情况下$遍历到第i个元素时候将要移动i-1个元素$
> 如下:
>
> | 索引 | 0 | 1 | 2 | 3 | 4 | 5 | 6 |
  | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
  | 关键字 | 10 | 9 | 8 | 7 | 6 | 5 | 4|
  显然第一个元素不需要移动,遍历第二个元素时,需要将10移动(遍历第二个元素,移动$$$(2-1)$$$次)以此类推
所以总的移动次数是$0+1+2+………n-1 = n(n+1)/2 = O(n^2)$此外还有比较的开销,与移动次数相同,所以其数量级一样
+ 平均情况 : $$$O(n^2)$$$

### 空间效率
+ 因为此算法在过程中,只需要一个变量暂存当前插入值,显然空间复杂度为$$$O(1)$$$


## 折半(二分)插入排序

### 原理